!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){!function(t){"use strict";var e="File format is not recognized.",n="CRC failed.",r="File contains encrypted entry.",i="File is using Zip64 (4gb+ file size).",a="Error while reading zip file.",o="Error while writing zip file.",s="Error while writing file data.",c="Error while reading file data.",u="File already exists.",f=524288,h="text/plain";try{B=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(t){}function l(){this.crc=-1}function p(){}function d(t,e){var n,r;return n=new ArrayBuffer(t),r=new Uint8Array(n),e&&r.set(e,0),{buffer:n,array:r,view:new DataView(n)}}function g(){}function m(t){var e,n=this;n.size=0,n.init=function(r,i){var a=new Blob([t],{type:h});(e=new v(a)).init(function(){n.size=e.size,r()},i)},n.readUint8Array=function(t,n,r,i){e.readUint8Array(t,n,r,i)}}function w(e){var n,r=this;r.size=0,r.init=function(t){for(var i=e.length;"="==e.charAt(i-1);)i--;n=e.indexOf(",")+1,r.size=Math.floor(.75*(i-n)),t()},r.readUint8Array=function(r,i,a){var o,s=d(i),c=4*Math.floor(r/3),u=4*Math.ceil((r+i)/3),f=t.atob(e.substring(c+n,u+n)),h=r-3*Math.floor(c/4);for(o=h;o<h+i;o++)s.array[o-h]=f.charCodeAt(o);a(s.array)}}function v(t){var e=this;e.size=0,e.init=function(n){e.size=t.size,n()},e.readUint8Array=function(e,n,r,i){var a=new FileReader;a.onload=function(t){r(new Uint8Array(t.target.result))},a.onerror=i;try{a.readAsArrayBuffer(function(t,e,n){if(e<0||n<0||e+n>t.size)throw new RangeError("offset:"+e+", length:"+n+", size:"+t.size);return t.slice?t.slice(e,e+n):t.webkitSlice?t.webkitSlice(e,e+n):t.mozSlice?t.mozSlice(e,e+n):t.msSlice?t.msSlice(e,e+n):void 0}(t,e,n))}catch(t){i(t)}}}function y(){}function _(t){var e;this.init=function(t){e=new Blob([],{type:h}),t()},this.writeUint8Array=function(t,n){e=new Blob([e,B?t:t.buffer],{type:h}),n()},this.getData=function(n,r){var i=new FileReader;i.onload=function(t){n(t.target.result)},i.onerror=r,i.readAsText(e,t)}}function z(e){var n="",r="";this.init=function(t){n+="data:"+(e||"")+";base64,",t()},this.writeUint8Array=function(e,i){var a,o=r.length,s=r;for(r="",a=0;a<3*Math.floor((o+e.length)/3)-o;a++)s+=String.fromCharCode(e[a]);for(;a<e.length;a++)r+=String.fromCharCode(e[a]);s.length>2?n+=t.btoa(s):r=s,i()},this.getData=function(e){e(n+t.btoa(r))}}function b(t){var e;this.init=function(n){e=new Blob([],{type:t}),n()},this.writeUint8Array=function(n,r){e=new Blob([e,B?n:n.buffer],{type:t}),r()},this.getData=function(t){t(e)}}function U(t,e,n,r,i,a,o,s,c,u){var h,l,p,d=0,g=e.sn;function m(){t.removeEventListener("message",w,!1),s(l,p)}function w(e){var n=e.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void c(s);if(n.sn===g)switch("number"==typeof n.codecTime&&(t.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(t.crcTime+=n.crcTime),n.type){case"append":i?(l+=i.length,r.writeUint8Array(i,function(){v()},u)):v();break;case"flush":p=n.crc,i?(l+=i.length,r.writeUint8Array(i,function(){m()},u)):m();break;case"progress":o&&o(h+n.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function v(){(h=d*f)<=a?n.readUint8Array(i+h,Math.min(f,a-h),function(n){o&&o(h,a);var r=0===h?e:{sn:g};r.type="append",r.data=n;try{t.postMessage(r,[n.buffer])}catch(e){t.postMessage(r)}d++},c):t.postMessage({sn:g,type:"flush"})}l=0,t.addEventListener("message",w,!1),v()}function C(t,e,n,r,i,a,o,s,c,u){var h,p=0,d=0,g="input"===a,m="output"===a,w=new l;!function a(){var l;if((h=p*f)<i)e.readUint8Array(r+h,Math.min(f,i-h),function(e){var r;try{r=t.append(e,function(t){o&&o(h+t,i)})}catch(t){return void c(t)}r?(d+=r.length,n.writeUint8Array(r,function(){p++,setTimeout(a,1)},u),m&&w.append(r)):(p++,setTimeout(a,1)),g&&w.append(e),o&&o(h,i)},c);else{try{l=t.flush()}catch(t){return void c(t)}l?(m&&w.append(l),d+=l.length,n.writeUint8Array(l,function(){s(d,w.get())},u)):s(d,w.get())}}()}function A(e,n,r,i,a,o,s,c,u,f,h){t.zip.useWebWorkers&&s?U(e,{sn:n,codecClass:"NOOP",crcType:"input"},r,i,a,o,u,c,f,h):C(new p,r,i,a,o,"input",u,c,f,h)}function S(t){var e,n,r="",i=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(e=0;e<t.length;e++)r+=(n=255&t.charCodeAt(e))>127?i[n-128]:String.fromCharCode(n);return r}function k(t){return decodeURIComponent(escape(t))}function E(t){var e,n="";for(e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}function L(t,e,n,a,o){t.version=e.view.getUint16(n,!0),t.bitFlag=e.view.getUint16(n+2,!0),t.compressionMethod=e.view.getUint16(n+4,!0),t.lastModDateRaw=e.view.getUint32(n+6,!0),t.lastModDate=function(t){var e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(t){}}(t.lastModDateRaw),1!=(1&t.bitFlag)?((a||8!=(8&t.bitFlag))&&(t.crc32=e.view.getUint32(n+10,!0),t.compressedSize=e.view.getUint32(n+14,!0),t.uncompressedSize=e.view.getUint32(n+18,!0)),4294967295!==t.compressedSize&&4294967295!==t.uncompressedSize?(t.filenameLength=e.view.getUint16(n+22,!0),t.extraFieldLength=e.view.getUint16(n+24,!0)):o(i)):o(r)}function M(r,i,o){var u=0;function f(){}f.prototype.getData=function(i,a,f,h){var l=this;function p(t,e){h&&!function(t){var e=d(4);return e.view.setUint32(0,t),l.crc32==e.view.getUint32(0)}(e)?o(n):i.getData(function(t){a(t)})}function g(t){o(t||c)}function m(t){o(t||s)}r.readUint8Array(l.offset,30,function(n){var a,s=d(n.length,n);1347093252==s.view.getUint32(0)?(L(l,s,4,!1,o),a=l.offset+30+l.filenameLength+l.extraFieldLength,i.init(function(){0===l.compressionMethod?A(l._worker,u++,r,i,a,l.compressedSize,h,p,f,g,m):function(e,n,r,i,a,o,s,c,u,f,h){var l=s?"output":"none";t.zip.useWebWorkers?U(e,{sn:n,codecClass:"Inflater",crcType:l},r,i,a,o,u,c,f,h):C(new t.zip.Inflater,r,i,a,o,l,u,c,f,h)}(l._worker,u++,r,i,a,l.compressedSize,h,p,f,g,m)},m)):o(e)},g)};var h={getEntries:function(t){var n=this._worker;!function(t){var n=22;if(r.size<n)o(e);else{var i=n+65536;s(n,function(){s(Math.min(i,r.size),function(){o(e)})})}function s(e,i){r.readUint8Array(r.size-e,e,function(e){for(var r=e.length-n;r>=0;r--)if(80===e[r]&&75===e[r+1]&&5===e[r+2]&&6===e[r+3])return void t(new DataView(e.buffer,r,n));i()},function(){o(a)})}}(function(i){var s,c;s=i.getUint32(16,!0),c=i.getUint16(8,!0),s<0||s>=r.size?o(e):r.readUint8Array(s,r.size-s,function(r){var i,a,s,u,h=0,l=[],p=d(r.length,r);for(i=0;i<c;i++){if((a=new f)._worker=n,1347092738!=p.view.getUint32(h))return void o(e);L(a,p,h+6,!0,o),a.commentLength=p.view.getUint16(h+32,!0),a.directory=16==(16&p.view.getUint8(h+38)),a.offset=p.view.getUint32(h+42,!0),s=E(p.array.subarray(h+46,h+46+a.filenameLength)),a.filename=2048==(2048&a.bitFlag)?k(s):S(s),a.directory||"/"!=a.filename.charAt(a.filename.length-1)||(a.directory=!0),u=E(p.array.subarray(h+46+a.filenameLength+a.extraFieldLength,h+46+a.filenameLength+a.extraFieldLength+a.commentLength)),a.comment=2048==(2048&a.bitFlag)?k(u):S(u),l.push(a),h+=46+a.filenameLength+a.extraFieldLength+a.commentLength}t(l)},function(){o(a)})})},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null),t&&t()},_worker:null};t.zip.useWebWorkers?H("inflater",function(t){h._worker=t,i(h)},function(t){o(t)}):i(h)}function R(t){return unescape(encodeURIComponent(t))}function x(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t.charCodeAt(e));return n}function D(e,n,r,i){var a={},s=[],f=0,h=0;function l(t){r(t||o)}function p(t){r(t||c)}var g={add:function(n,o,c,g,m){var w,v,y,_=this._worker;function z(t,n){var r=d(16);f+=t||0,r.view.setUint32(0,1347094280),void 0!==n&&(w.view.setUint32(10,n,!0),r.view.setUint32(4,n,!0)),o&&(r.view.setUint32(8,t,!0),w.view.setUint32(14,t,!0),r.view.setUint32(12,o.size,!0),w.view.setUint32(18,o.size,!0)),e.writeUint8Array(r.array,function(){f+=16,c()},l)}function b(){m=m||{},n=n.trim(),m.directory&&"/"!=n.charAt(n.length-1)&&(n+="/"),a.hasOwnProperty(n)?r(u):(v=x(R(n)),s.push(n),function(t){var r;y=m.lastModDate||new Date,w=d(26),a[n]={headerArray:w.array,directory:m.directory,filename:v,offset:f,comment:x(R(m.comment||""))},w.view.setUint32(0,335546376),m.version&&w.view.setUint8(0,m.version),i||0===m.level||m.directory||w.view.setUint16(4,2048),w.view.setUint16(6,(y.getHours()<<6|y.getMinutes())<<5|y.getSeconds()/2,!0),w.view.setUint16(8,(y.getFullYear()-1980<<4|y.getMonth()+1)<<5|y.getDate(),!0),w.view.setUint16(22,v.length,!0),(r=d(30+v.length)).view.setUint32(0,1347093252),r.array.set(w.array,4),r.array.set(v,30),f+=r.array.length,e.writeUint8Array(r.array,t,l)}(function(){o?i||0===m.level?A(_,h++,o,e,0,o.size,!0,z,g,p,l):function(e,n,r,i,a,o,s,c,u){t.zip.useWebWorkers?U(e,{sn:n,options:{level:a},codecClass:"Deflater",crcType:"input"},r,i,0,r.size,s,o,c,u):C(new t.zip.Deflater,r,i,0,r.size,"input",s,o,c,u)}(_,h++,o,e,m.level,z,g,p,l):z()}))}o?o.init(b,p):b()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,i,o=0,c=0;for(r=0;r<s.length;r++)o+=46+(i=a[s[r]]).filename.length+i.comment.length;for(n=d(o+22),r=0;r<s.length;r++)i=a[s[r]],n.view.setUint32(c,1347092738),n.view.setUint16(c+4,5120),n.array.set(i.headerArray,c+6),n.view.setUint16(c+32,i.comment.length,!0),i.directory&&n.view.setUint8(c+38,16),n.view.setUint32(c+42,i.offset,!0),n.array.set(i.filename,c+46),n.array.set(i.comment,c+46+i.filename.length),c+=46+i.filename.length+i.comment.length;n.view.setUint32(c,1347093766),n.view.setUint16(c+8,s.length,!0),n.view.setUint16(c+10,s.length,!0),n.view.setUint32(c+12,o,!0),n.view.setUint32(c+16,f,!0),e.writeUint8Array(n.array,function(){e.getData(t)},l)},_worker:null};t.zip.useWebWorkers?H("deflater",function(t){g._worker=t,n(g)},function(t){r(t)}):n(g)}l.prototype.append=function(t){for(var e=0|this.crc,n=this.table,r=0,i=0|t.length;r<i;r++)e=e>>>8^n[255&(e^t[r])];this.crc=e},l.prototype.get=function(){return~this.crc},l.prototype.table=function(){var t,e,n,r=[];for(t=0;t<256;t++){for(n=t,e=0;e<8;e++)1&n?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r}(),p.prototype.append=function(t,e){return t},p.prototype.flush=function(){},m.prototype=new g,m.prototype.constructor=m,w.prototype=new g,w.prototype.constructor=w,v.prototype=new g,v.prototype.constructor=v,y.prototype.getData=function(t){t(this.data)},_.prototype=new y,_.prototype.constructor=_,z.prototype=new y,z.prototype.constructor=z,b.prototype=new y,b.prototype.constructor=b;var T={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function H(e,n,r){if(null===t.zip.workerScripts||null===t.zip.workerScriptsPath){var i;if(t.zip.workerScripts){if(i=t.zip.workerScripts[e],!Array.isArray(i))return void r(new Error("zip.workerScripts."+e+" is not an array!"));i=function(t){var e=document.createElement("a");return t.map(function(t){return e.href=t,e.href})}(i)}else(i=T[e].slice(0))[0]=(t.zip.workerScriptsPath||"")+i[0];var a=new Worker(i[0]);a.codecTime=a.crcTime=0,a.postMessage({type:"importScripts",scripts:i.slice(1)}),a.addEventListener("message",function t(e){var i=e.data;if(i.error)return a.terminate(),void r(i.error);"importScripts"===i.type&&(a.removeEventListener("message",t),a.removeEventListener("error",o),n(a))}),a.addEventListener("error",o)}else r(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function o(t){a.terminate(),r(t)}}function W(t){console.error(t)}t.zip={Reader:g,Writer:y,BlobReader:v,Data64URIReader:w,TextReader:m,BlobWriter:b,Data64URIWriter:z,TextWriter:_,createReader:function(t,e,n){n=n||W,t.init(function(){M(t,e,n)},n)},createWriter:function(t,e,n,r){n=n||W,r=!!r,t.init(function(){D(t,e,n,r)},n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null};var F,B,I="HTTP Range not supported.",g=t.zip.Reader,y=t.zip.Writer;try{B=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(t){}function j(t){var e=this;function n(n,r){var i;e.data?n():((i=new XMLHttpRequest).addEventListener("load",function(){e.size||(e.size=Number(i.getResponseHeader("Content-Length"))||Number(i.response.byteLength)),e.data=new Uint8Array(i.response),n()},!1),i.addEventListener("error",r,!1),i.open("GET",t),i.responseType="arraybuffer",i.send())}e.size=0,e.init=function(r,i){if(function(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol}(t)){var a=new XMLHttpRequest;a.addEventListener("load",function(){e.size=Number(a.getResponseHeader("Content-Length")),e.size?r():n(r,i)},!1),a.addEventListener("error",i,!1),a.open("HEAD",t),a.send()}else n(r,i)},e.readUint8Array=function(t,r,i,a){n(function(){i(new Uint8Array(e.data.subarray(t,t+r)))},a)}}function P(t){var e=this;e.size=0,e.init=function(n,r){var i=new XMLHttpRequest;i.addEventListener("load",function(){e.size=Number(i.getResponseHeader("Content-Length")),"bytes"==i.getResponseHeader("Accept-Ranges")?n():r(I)},!1),i.addEventListener("error",r,!1),i.open("HEAD",t),i.send()},e.readUint8Array=function(e,n,r,i){!function(e,n,r,i){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="arraybuffer",a.setRequestHeader("Range","bytes="+e+"-"+(e+n-1)),a.addEventListener("load",function(){r(a.response)},!1),a.addEventListener("error",i,!1),a.send()}(e,n,function(t){r(new Uint8Array(t))},i)}}function O(t){var e=this;e.size=0,e.init=function(n,r){e.size=t.byteLength,n()},e.readUint8Array=function(e,n,r,i){r(new Uint8Array(t.slice(e,e+n)))}}function X(){var t;this.init=function(e,n){t=new Uint8Array,e()},this.writeUint8Array=function(e,n,r){var i=new Uint8Array(t.length+e.length);i.set(t),i.set(e,t.length),t=i,n()},this.getData=function(e){e(t.buffer)}}function N(t,e){var n;this.init=function(e,r){t.createWriter(function(t){n=t,e()},r)},this.writeUint8Array=function(t,r,i){var a=new Blob([B?t:t.buffer],{type:e});n.onwrite=function(){n.onwrite=null,r()},n.onerror=i,n.write(a)},this.getData=function(e){t.file(e)}}j.prototype=new g,j.prototype.constructor=j,P.prototype=new g,P.prototype.constructor=P,O.prototype=new g,O.prototype.constructor=O,X.prototype=new y,X.prototype.constructor=X,N.prototype=new y,N.prototype.constructor=N,t.zip.FileWriter=N,t.zip.HttpReader=j,t.zip.HttpRangeReader=P,t.zip.ArrayBufferReader=O,t.zip.ArrayBufferWriter=X,t.zip.fs&&((F=t.zip.fs.ZipDirectoryEntry).prototype.addHttpContent=function(e,n,r){return function(e,n,r,i){if(e.directory)return i?new F(e.fs,n,r,e):new t.zip.fs.ZipFileEntry(e.fs,n,r,e);throw"Parent entry is not a directory."}(this,e,{data:n,Reader:r?P:j})},F.prototype.importHttpContent=function(t,e,n,r){this.importZip(e?new P(t):new j(t),n,r)},t.zip.fs.FS.prototype.importHttpContent=function(t,e,n,r){this.entries=[],this.root=new F(this),this.root.importHttpContent(t,e,n,r)})}(this)},function(t,e,n){"use strict";n.r(e);class r{constructor(t,e){this.image=t,this.metainfo=e,this.consistentHorizontalMap=e.horizontalSeamMap,this.consistentVerticalMap=e.verticalSeamMap}seamImageData(t,e){const n=Math.floor(this.binarySearch(t,this.metainfo.widthKeys)),r=Math.floor(this.binarySearch(e,this.metainfo.heightKeys));let i=[],a=this.image,o=new Uint8ClampedArray(n*a.height*4),s=new Uint8ClampedArray(n*r*4);if(a.width>=n){const t=a.width-n;for(let e=0;e<a.height;e++){i[e]=[];let r=0;for(let s=0;s<a.width;s++){i[e][r]=this.consistentHorizontalMap[e][s];const c=4*(e*n+r),u=4*(e*a.width+s);o[c]=a.data[u],o[c+1]=a.data[u+1],o[c+2]=a.data[u+2],o[c+3]=a.data[u+3],this.consistentVerticalMap[e][s]>t&&(r+=1)}}}else{const t=n-a.width;for(let e=0;e<a.height;e++){i[e]=[];let r=0;for(let s=0;s<a.width;s++){const c=4*(e*a.width+s);if(this.consistentVerticalMap[e][s]<=t){i[e][r]=this.consistentHorizontalMap[e][s];const t=4*(e*n+r);o[t]=a.data[c],o[t+1]=a.data[c+1],o[t+2]=a.data[c+2],o[t+3]=a.data[c+3],r+=1}i[e][r]=this.consistentHorizontalMap[e][s];const u=4*(e*n+r);o[u]=a.data[c],o[u+1]=a.data[c+1],o[u+2]=a.data[c+2],o[u+3]=a.data[c+3],r+=1}}}if(a.height>=r){const t=a.height-r;for(let e=0;e<n;e++){let r=0;for(let c=0;c<a.height;c++){const a=4*(r*n+e),u=4*(c*n+e);s[a]=o[u],s[a+1]=o[u+1],s[a+2]=o[u+2],s[a+3]=o[u+3],i[c][e]>t&&(r+=1)}}}else{const t=r-a.height;for(let e=0;e<n;e++){let r=0;for(let c=0;c<a.height;c++){const a=4*(c*n+e);if(i[c][e]<=t){const t=4*(r*n+e);s[t]=o[a],s[t+1]=o[a+1],s[t+2]=o[a+2],s[t+3]=o[a+3],r+=1}const u=4*(r*n+e);s[u]=o[a],s[u+1]=o[a+1],s[u+2]=o[a+2],s[u+3]=o[a+3],r+=1}}}return new ImageData(s,n,r)}originX(t){return this.binarySearch(t,this.metainfo.originXKeys)}originY(t){return this.binarySearch(t,this.metainfo.originYKeys)}scaleX(t){return this.binarySearch(t,this.metainfo.scaleXKeys)}scaleY(t){return this.binarySearch(t,this.metainfo.scaleYKeys)}binarySearch(t,e){let n=-1,r=e.length;for(;r-n>1;){const i=Math.floor((n+r)/2);e[i][0]>=t?r=i:n=i}if(1===e.length)return e[0][1];if(r===e.length){const n=e[r-2][1],i=e[r-1][1];return i+(i-n)/(e[r-1][0]-e[r-2][0])*(t-e[r-1][0])}if(e[r][0]===t)return e[r][1];if(0===r){const n=e[r+1][1],i=e[r][1];return i+(i-n)/(e[r][0]-e[r+1][0])*(t-e[r][0])}{const n=e[r-1][1];return n+(e[r][1]-n)/(e[r][0]-e[r-1][0])*(t-e[r-1][0])}}}var i=n(0);customElements.define("r-img",class extends HTMLElement{constructor(){super(),this._rvgSrc=null,this._timer=0,this._resizer=null,this._metainfo=null,this._fileUrl=null,this._scriptPath=function(){if(document.currentScript)return document.currentScript;{let t=document.getElementsByTagName("script");if(script=t[t.length-1],script.src)return script.src}}().src.split("/").slice(0,-1).join("/");const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","wrapper"),this._canvas=document.createElement("canvas"),this._canvas.setAttribute("class","main_canvas"),this._mainCtx=this._canvas.getContext("2d"),this._imageCanvas=document.createElement("canvas"),this._imageCanvas.setAttribute("class","hidden_canvas"),this._imageCtx=this._imageCanvas.getContext("2d");const n=document.createElement("style");n.textContent="\n      .wrapper {\n        display: block;\n        width: 100%;\n        height: 100%;\n        padding: 0;\n        margin: 0;\n        overflow: hidden;\n      }\n      \n      .main_canvas {\n        display: block;\n        margin: 0;\n        padding: 0;\n      }\n      \n      .hidden_canvas {\n        display: none;\n      }\n    ",t.appendChild(n),t.appendChild(e),e.appendChild(this._canvas),e.appendChild(this._imageCanvas)}static get observedAttributes(){return["src"]}attributeChangedCallback(t,e,n){this._rvgSrc=n,e!==n&&this._updateSrc()}connectedCallback(){this._updateSrc()}get src(){return this._rvgSrc}set src(t){this.setAttribute("src",t)}_onresize(){this._timer>0&&clearTimeout(this._timer);const t=this;this._timer=setTimeout(function(){t._drawImage()},200)}_drawImage(){const t=this.clientWidth,e=this.clientHeight,n=this._resizer.seamImageData(t,e),r=this._resizer.originX(t),i=this._resizer.originY(e),a=this._resizer.scaleX(t),o=this._resizer.scaleY(e);this._canvas.width=t,this._canvas.height=e,this._imageCanvas.width=n.width,this._imageCanvas.height=n.height,this._imageCtx.clearRect(0,0,this._imageCanvas.width,this._imageCanvas.height),this._imageCtx.putImageData(n,0,0),this._mainCtx.clearRect(0,0,t,e),this._mainCtx.scale(a,o),this._mainCtx.drawImage(this._imageCanvas,r,i),this._mainCtx.scale(1/a,1/o)}_updateSrc(){if(!this._rvgSrc)return this._mainCtx.clearRect(0,0,this._mainCtx.width,this._mainCtx.height),this._imageCtx.clearRect(0,0,this._imageCtx.width,this._imageCtx.height),this._rvgSrc=null,this._timer=0,this._resizer=null,this._unzipTimer=0,this._metainfo=null,void(this._fileUrl=null);const t=this;i.zip.workerScripts={deflater:[this._scriptPath+"/worker_pako.js"],inflater:[this._scriptPath+"/worker_pako.js"]},i.zip.createReader(new i.zip.HttpReader(this._rvgSrc),function(e){e.getEntries(function(e){for(const n of e)"metainfo.json"===n.filename?n.getData(new i.zip.TextWriter,function(e){t._metainfo=JSON.parse(e)}):"image.png"===n.filename&&n.getData(new i.zip.BlobWriter,function(e){t._fileUrl=URL.createObjectURL(e)});let n=setInterval(function(){t._metainfo&&t._fileUrl&&(t._image=new Image,t._image.src=t._fileUrl,t._image.onload=(()=>{const e=document.createElement("canvas"),n=e.getContext("2d");e.width=t._image.naturalWidth,e.height=t._image.naturalHeight,console.log({width:t._image.naturalWidth,height:t._image.naturalHeight}),n.drawImage(t._image,0,0,t._image.naturalWidth,t._image.naturalHeight),t._resizer=new r(n.getImageData(0,0,t._image.naturalWidth,t._image.naturalHeight),t._metainfo),t._drawImage()}),clearInterval(n))},100)})})}}),window.addEventListener("resize",function(){const t=document.getElementsByTagName("r-img");for(const e of t)e._onresize()})}]);